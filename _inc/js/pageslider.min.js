/*
Page Slider Class 

Example Usage:
  var flightsWizard = new pageSlider('flightsWizard');
  flightsWizard.addPage( 'page1' );
  flightsWizard.addPage( 'page2' );
  flightsWizard.show( 'page1' );
  
HTML:
    <div style="overflow-x:hidden;width:100%;">
        <div id="flightsWizard">
            <div id="page1" style="display:none;" class="center siteWidth">Page 1</div>
            <div id="page2" style="display:none;" class="center siteWidth">Page 2</div>
        </div>
    </div>
*/

function pageSlider(pagesContainerId)
{
	this.pagesContainerId = pagesContainerId;
	this.pages = {};
}

pageSlider.prototype.addPage = function ( pageElementId, onloadCallback ) {
	this.pages[pageElementId] = { 'visible' : false, 'element' : document.getElementById( pageElementId ), 'onloadCallback' : onloadCallback };
};

pageSlider.prototype.show = function ( pageElementId ) {
    if(this.pages[pageElementId].visible==false)
    {
    
      var goForward = true;
      
      for (var page in this.pages) {

        if(this.pages[page].visible)
        {
          var prev_page = page;

          // If we find the next_page before we find the prev_page
          // then the next_page is BACK in our history
          // So we should slide back or left.
          if(typeof next_page=='string'){
            goForward = false;
          }
        }
        else if(page==pageElementId)
        {
          var next_page = page;
        }
      }
      
    
      var max_width = $( '#'+this.pagesContainerId ).width();

      if(typeof prev_page!='undefined'){
        this.pages[prev_page].element.style.display = 'none';
        this.pages[prev_page].visible = false;
      }

      this.pages[next_page].element.style.display = 'block';
      this.pages[next_page].visible = true;
      
	  var onloadCallback = this.pages[next_page].onloadCallback;if(typeof onloadCallback!='function'){onloadCallback=function(){};}
      
	  
      if(goForward)
      {
          this.pages[next_page].element.style.left = max_width+'px';
          $( this.pages[next_page].element ).animate({ left: 0}, 500, 'swing', function() {
              onloadCallback();
          });
        
//      	document.getElementById(this.pagesContainerId).style.marginLeft = max_width+'px';
//      	$( '#'+this.pagesContainerId ).animate({ marginLeft: 0}, 500, function() {
//			onloadCallback();
//		});
        
      }
      else
      {
          this.pages[next_page].element.style.left = '-'+max_width+'px';
          $( this.pages[next_page].element ).animate({ left: 0}, 500, function() {
              onloadCallback();
          });
//        document.getElementById(this.pagesContainerId).style.marginLeft = '-'+max_width+'px';
//        $( '#'+this.pagesContainerId ).animate({ marginLeft: 0}, 19500, function() {
//			onloadCallback();
//		});
      }
    }
};

  /* END OF CLASS */